"use strict";

var _Object$defineProperty = require("@babel/runtime-corejs3/core-js-stable/object/define-property");

var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.default = baseSortBy;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime-corejs3/helpers/toConsumableArray"));

var _sort = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/sort"));

var _pipe = _interopRequireDefault(require("../Strict/pipe.js"));

var _isArray = _interopRequireDefault(require("../Strict/isArray.js"));

var arrComparator = function arrComparator(arr) {
  return function (a, b) {
    var i = -1;

    while (++i < arr.length) {
      var ai = a[arr[i]],
          bi = b[arr[i]];
      if (ai === bi) continue;
      return ai < bi ? -1 : 1;
    }

    return 0;
  };
};

function baseSortBy(left, right, f, arr) {
  var _context, _context2;

  return (0, _isArray.default)(f) ? baseSortBy(left, right, arrComparator(f), arr) : typeof f == "string" ? baseSortBy(left, right, function (a) {
    return a[f];
  }, arr) : f.length == 2 ? (0, _sort.default)(_context = (0, _toConsumableArray2.default)(arr)).call(_context, right == -1 ? (0, _pipe.default)(f, function (n) {
    return n * -1;
  }) : f) : (0, _sort.default)(_context2 = (0, _toConsumableArray2.default)(arr)).call(_context2, function (a, b) {
    var fa = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : f(a);
    var fb = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : f(b);
    return fa == fb ? 0 : fa < fb ? left : right;
  });
}